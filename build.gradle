plugins {
	id 'java'
	id 'eclipse-wtp'
}

group 'it.francescofiora'
version = '1.0-SNAPSHOT'

allprojects {
	repositories {
  	mavenLocal()
  	mavenCentral()
	}
	sourceCompatibility = 1.8
	targetCompatibility = 1.8
}


subprojects {
		apply plugin: 'java'
		apply plugin: 'eclipse-wtp'
    apply plugin: 'checkstyle'

    sourceCompatibility = 1.8
    targetCompatibility = 1.8

    group = rootProject.group
    version = rootProject.version
    
		tasks.withType(JavaCompile) {
    	options.compilerArgs = [
      	 '-Amapstruct.defaultComponentModel=spring'
    	]
		}

		checkstyle {
		  toolVersion property('checkstyle.version')
		  configFile  rootProject.file("config/checkstyle/checkstyle.xml")
		  checkstyleTest.enabled = false
      configProperties = [
           'checkstyle.cache.file': "${buildDir}/checkstyle.cache",
      ]
		}
		tasks.withType(Checkstyle) {
		  reports {
		    xml.enabled = false
		    html.enabled = true
		  }
		}
		checkstyleMain {
  		source ='src/main/java'
		}
}

wrapper {
    gradleVersion = "6.3"
}
